<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 	<mapper namespace="ksmart.pentagon.board.BoardMapper">
 		<resultMap type="ksmart.pentagon.vo.Board" id="boardNoticeList">
 			<result property="boardCode" column="board_code"/>
 			<result property="lCode" column="l_code"/>
 			<result property="uId" column="u_id"/>
 			<result property="boardLCode" column="board_l_code"/>
 			<result property="boardMCode" column="board_m_code"/>
 			<result property="boardTitle" column="board_title"/>
 			<result property="boardPw" column="board_pw"/>
 			<result property="boardContent" column="board_content"/>
 			<result property="boardOpen" column="board_open"/>
 			<result property="boardPageView" column="board_page_view"/>
 			<result property="boardDate" column="board_date"/>
 		</resultMap>

<!-- 공지사항 리스트 불러오는 쿼리문 -->
  	<select id="getBoard" resultMap="boardNoticeList">
  	SELECT
*
FROM board AS b INNER JOIN board_large AS bl
ON b.board_l_code = bl.board_l_code
WHERE bl.board_l_name = #{boardLName} ORDER BY b.board_date DESC;
  	</select>
  	
<!--   	공지사항 PK MAX코드 불러오기 쿼리문 -->
  	<select id="maxBoardCode" resultType="String">
  		SELECT
  		max(board_code)
  		AS max
  		FROM board
  	</select>
  	
<!-- 공지사항 등록 쿼리문 -->
  	<insert id="boardInsert" parameterType="ksmart.pentagon.vo.Board">
 		INSERT INTO board
	(board_code, 
	l_code, 
	u_id, 
	board_l_code, 
	board_m_code, 
	board_title, 
	board_pw, 
	board_content, 
	board_open, 
	board_page_view, 
	board_date)
	VALUES (#{boardCode}, #{lCode}, #{uId}, #{boardLCode}, #{boardMCode}, #{boardTitle}, #{boardPw}, #{boardContent}, #{boardOpen}, 0, NOW())
  	</insert>
  	
<!-- 게시판 공지사항 상세보기 쿼리문   -->
	<update id="boardPageViewUp" parameterType="String">
  	UPDATE 
  	board 
  	SET 
  	board_page_view = board.board_page_view + 1 
  	WHERE board_code = #{boardCode}
  	</update>
  	
  	
  	<select id="getBoardDatail" resultMap="boardNoticeList">
  	SELECT
	*
	FROM board AS b
	WHERE b.board_code = #{boardCode}
  	</select>
  	
  	<update id="setBoardUpdate" parameterType="ksmart.pentagon.vo.Board">
  	UPDATE board
	SET
		board_title= #{boardTitle},
		board_content= #{boardContent}
	WHERE board_code = #{boardCode}
  	</update>
  	
  	<delete id="boardDelete" parameterType="String">
  		DELETE 
  		FROM 
  		board 
  		WHERE board_code= #{boardCode}
  	</delete>
  	</mapper>