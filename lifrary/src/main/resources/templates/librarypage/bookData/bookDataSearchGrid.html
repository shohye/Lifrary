<!DOCTYPE html>
<!-- 사진버전 도서 검색 리스트 -->
<html 	xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layout/library/libraryDefault}">
		
	 <th:block layout:fragment="libraryTitle">
		<title>검색도서 목록</title>
	 </th:block>
     <th:block layout:fragment="customScript">
     <script type="text/javascript" th:inline="javascript">  
       $(document).ready(function(){  	
    	   
    		// 유효성검사 시작
    		$('#searchBtn').click(function(){   			
    			var biName = $('#biName');
    			console.log(biName.val());
    			
    			if(biName.val() == ''){
    				alert('검색어를 입력해주세요');
    				biName.focus();
    				return false;
    			}
    			    			
    			$('#searchForm').submit();
    			
    		}); // 유효성검사 끝    		
    	}); // 처음 function끝
    	    	
    	</script>
  	    </th:block>



    <th:block layout:fragment="customContents">
        <section class="page-banner services-banner" th:fragment="bookBannerFragment">
            <div class="container">
                <div class="banner-header">
                    <h2>Books & Media Listing</h2>
                    <span class="underline center"></span>
                    <p class="lead">Proin ac eros pellentesque dolor pharetra tempo.</p>
                </div>
                <div class="breadcrumb">
                    <ul>
                        <li><a th:href="@{/}">Home</a></li>
                        <li>Books & Media</li>
                    </ul>
                </div>
            </div>
        </section>
        
            <div id="primary" class="content-area">
                <main id="main" class="site-main">
                    <div class="books-media-gird">
                        <div class="container">
                            <div class="row">
                                <!-- Start: Search Section -->
                               <section class="search-filters" th:fragment="searchSectionFragment">
						          <div class="row">
			            					    <div class="col-md-11 col-md-push-1">
						              <div class="container">
						                 <div class="filter-box">
						                      <form id="searchForm" th:action="@{/lifrary/bookDataSearchList}" method="get">							    
						                        <div class="col-md-3 col-sm-6">
						                            <div class="form-group">
						                                <select name="bclCode" id="bclCode" class="form-control">
						                                    <option value="bcl001">단행본</option>
						                                    <option value="bcl002">연속간행물</option>
						                                    <option value="bcl003">비도서</option>                            
						                                </select>
						                            </div>
						                        </div>
						                        <div class="col-md-4 col-sm-6">
						                            <div class="form-group">
						                                <label class="sr-only" for="keywords">Search by Keyword</label>
						                                <input id="biName" name="biName" class="form-control" placeholder="Search by Keyword" type="text">
						                            </div>
						                        </div>
						                        <div class="col-md-2 col-sm-6">					                     
						                            <div class="form-group">
						                                <input id="searchBtn" class="form-control" type="submit" value="검색">
						                            </div>
						                        </div>
						                        <div class="col-md-2 col-sm-6" style="margin-top: 5px">					                     
						                                <a th:href="@{/lifrary/bookDataSearchDetail}" class="btn btn-dark-gray">상세검색</a>			             
						                        </div>
						                        
						                    </form>
						                 </div>
						               </div>
						             </div>
						           </div>
						        </section>
                                <!-- End: Search Section -->
                            </div>
                            <div class="row">
                                <div class="col-md-10 col-md-push-1">
                                    <div class="filter-options margin-list">
                                        <div class="row">                                            
                                            <div class="col-md-4 col-sm-4">
                                                <select name="orderby">
                                                    <option selected>Default sorting</option>
                                                    <option>Sort by popularity</option>
                                                    <option>Sort by rating</option>
                                                    <option>Sort by newness</option>
                                                    <option>Sort by price</option>
                                                </select>
                                            </div>
                                            <!-- <div class="col-md-4 col-sm-4">
                                                <div class="filter-result">Showing items 1 to 9 of 19 total</div>
                                            </div> -->
                                            <div class="col-md-3 col-sm-3 pull-right" >
                                                <div class="filter-toggle">
                                                	<input type="hidden" name="bclCode" value="${bclCode}">
				                                	<input type="hidden" name="biName" value="${biName}">				                                 
                                                    <a th:href="@{/lifrary/bookDataSearchGrid}" class="active"><i class="glyphicon glyphicon-th-large"></i></a>
                                                    <a th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd})}">
                                     					<i class="glyphicon glyphicon-th-list"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="books-gird" style="margin-top: 5px">
                                       <ul>                                       
                                         <th:block th:if="${#lists.size(searchList)} > 0">	
                                            <li th:each="sl : ${searchList}">
                                                <figure>
                                                    <a th:href="@{/lifrary/bookDetail(bsCode=${sl.bsCode})}">
				                                     	<img alt="도서 이미지를 찾을 수 없습니다" th:src="${sl.bookInformation.biImg}">
				                                    </a>
                                                    <figcaption>
                                                        <p><strong><span th:text="${sl.bookInformation.biName}"></span></strong></p>
                                                        <p><strong>Author:</strong>&emsp;<span th:text="${sl.bookInformation.biAuthor}"></span></p>
                                                    </figcaption>
                                                </figure> 
                                            
                                                <div class="single-book-box">
                                                    <div class="post-detail">
                                                        
                                                        
                                                        <header class="entry-header">
                                                            <h3 class="entry-title"><a th:href="@{/lifrary/bookDetail(bsCode=${sl.bsCode})}"><span th:text="${sl.bookInformation.biName}"></a></h3>
                                                            <ul>
                                                                <li><strong>Author:</strong>&emsp;<span th:text="${sl.bookInformation.biAuthor}"></span></li>
                                                                <li><strong>ISBN:</strong>&emsp;<span th:text="${sl.bookInformation.biIsbn}"></span></li>
                                                            </ul>
                                                        </header>
                                                        <div class="entry-content">
                                                            <p th:text="${#strings.abbreviate(sl.bookInformation.biDtail,70)}"></p>
                                                        </div>
                                                        <footer class="entry-footer">
                                                            <a class="btn btn-primary" th:href="@{/lifrary/bookDetail(bsCode=${sl.bsCode})}">상세보기</a>
                                                        </footer>
                                                    </div>
                                                </div>                                       
                                            </li>
                                          </th:block>  
                                          <th:block th:unless="${#lists.size(searchList)} > 0">					                         
					                          <article style="margin-bottom: 40px">
					                              <div class="align-middle text-center" ><p>검색 결과가 없습니다.</p></div>
					                          </article>					                         
					                      </th:block>                                                                                                   
                                        </ul>
                                    </div>
                                    <div class="text-center" >
									    <span><a th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
				                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd},currentPage=1)}">처음</a></span>
									    
									    <!-- 현재 페이지가 1보다 클 경우 이전 href, 1보다 작은 경우 이전 text -->
									    <span th:if="${currentPage > 1}"><a th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
				                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd},currentPage=(${currentPage}-1))}">이전</a></span>
									    <span th:unless="${currentPage > 1}" th:text="이전"></span>
									    
									    <!-- #number.sequence 인수로 지정한 2개의 수 범위에서 배열을 생성 -->
									    <th:block th:each="num : ${#numbers.sequence(startPageNum,lastPageNum)}">
									        <span th:if="${currentPage == num}" th:text="${'['+ num + ']'}"></span>
									        <a th:unless="${currentPage == num}" th:text="${'['+ num + ']'}" th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
				                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd},currentPage=${num})}"></a>
									    </th:block>
									    
									    <!-- 현재 페이지가 마지막페이지와 같지 않을 경우 다음 href, 같을 경우 다음 text -->
									    <span th:if="${currentPage != lastPage}"><a th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
				                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd},currentPage=(${currentPage}+1))}">다음</a></span>
									    <span th:unless="${currentPage != lastPage}" th:text="다음"></span>
									    <span><a th:href="@{/lifrary/bookDataSearchList(bclCode=${param.bclCode},biName=${param.biName},biPublisher=${param.biPublisher},
				                                     biIsbn=${param.biIsbn},biAuthor=${param.biAuthor},biDtail=${param.biDtail},biYearStart=${param.biYearStart},biYearEnd=${param.biYearEnd},currentPage=${lastPage})}">마지막</a></span>
							       </div>
                                </div>
                                
                                <!-- START : bookPageLeftMenu -->
			                       <section th:replace="fragments/library/bookPageLeftMenu :: bookPageLeftMenuFragment"></section>
                                	
                                <!-- END : bookPageLeftMenu -->
                                
                            </div>
                        </div>
	              </div>
                </main>
            </div>
        </div>
      

       


</th:block>
</html>